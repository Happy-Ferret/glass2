<!doctype html>
<html>
<head>

    <meta charset="utf-8">
    <title>Desktop</title>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link href="../system/design/core.css" rel="stylesheet">
    <link href="../system/design/desktop.css" rel="stylesheet">
    <link href="../system/design/window.css" rel="stylesheet">
    <link href="../system/design/toolbar.css" rel="stylesheet">
    <link href="../system/design/notifications.css" rel="stylesheet">

    <link href="../node_modules/angular-material/angular-material.min.css" rel="stylesheet">
    <link href="../node_modules/jquery-ui-dist/jquery-ui.min.css" rel="stylesheet">

    <script src="../node_modules/angular/angular.js"></script>
    <script src="../node_modules/angular-aria/angular-aria.js"></script>
    <script src="../node_modules/angular-animate/angular-animate.js"></script>
    <script src="../node_modules/angular-material/angular-material.js"></script>
    <script src="../node_modules/angular-material-icons/angular-material-icons.js"></script>

    <style>

        body {
            display: none;
            background: url(../users/kurisu/wallpaper.png) no-repeat center center fixed;
        }

    </style>

    <script>
        const $ = require("jquery");
        const remote = require("electron").remote;
        const moment = require("moment");

        // Core
        const WindowManager = require("../core/WindowManager");
        const Notification = require("../core/Notification");
        const Taskbar = require("../core/Taskbar");

        // Apps
        const BrowserApp = require("../apps/Browser/main");
        const TerminalApp = require("../apps/Terminal/main");

        angular.module("desktop", ["ngMaterial", "ngMdIcons"])
            .controller("desktop", ($scope) => { });

        $(() => {
            setTimeout(() => $("body").fadeIn(250), 200);
            setInterval(() => $("#clock").text(moment().format("h:mm A")), 150);

            const taskbar = new Taskbar(".toolbar");
            const browser = new BrowserApp();
            const terminal = new TerminalApp();

            taskbar.addPin(browser);
            taskbar.addPin(terminal);

            setTimeout(() => {
                new Notification({
                    title: "System",
                    message: "Initialised",
                    image: "../system/images/system.png"
                });
            }, 700);
        });
    </script>

</head>
<body>

    <div class="desktop"></div>

    <div class="notifications pos-bottom-right" id="breadbox"></div>

    <div class="toolbar"></div>

</body>
</html>
